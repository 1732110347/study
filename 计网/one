互联网的 2 个重要基本特点

连通性 (connectivity)
使上网用户之间可以非常便捷、非常经济地交换各种信息
好像这些用户终端都彼此直接连通一样。

资源共享 (Sharing)
实现信息共享、软件共享、硬件共享。
由于网络的存在，这些资源好像就在用户身边一样地方便使用。


1.2.2                互联网基础结构发展的三个阶段
计算机网络：
由若干节点(node)和连接这些节点的链路(link)组成。
节点可以是计算机、集线器、交换机或路由器等

互连网 (internetwork 或 internet)：
多个网络通过一些路由器相互连接起来，构成了一个覆盖范围更大的计算机网络。
“网络的网络”(network of networks)。

三级结构：主干网、地区网和校园网（或企业网）。

出现了互联网服务提供者 ISP (Internet Service Provider)：
提供接入到互联网的服务。
需要收取一定的费用。
多层次 ISP 结构：
主干 ISP、地区 ISP 和本地 ISP。
覆盖面积大小和所拥有的 IP 地址数目的不同


1.3  互联网的组成
从互联网的工作方式上看，可以划分为两大块：
边缘部分： 由所有连接在互联网上的主机组成，由用户直接使用，用来进行通信（传送数据、音频或视频）和资源共享。
核心部分：由大量网络和连接这些网络的路由器组成，为边缘部分提供服务（提供连通性和交换）。

处在互联网边缘部分的就是连接在互联网上的所有的主机。这些主机又称为端系统 (end system)。

端系统之间的两种通信方式
客户/服务器方式
Client / Server 方式
简称为 C/S 方式
客户程序
被用户调用后运行，需主动向远地服务器发起通信（请求服务）。必须知道服务器程序的地址。
不需要特殊的硬件和很复杂的操作系统。
服务器程序
专门用来提供某种服务的程序，可同时处理多个客户请求。
一直不断地运行着，被动地等待并接受来自各地的客户的通信请求。不需要知道客户程序的地址。
一般需要强大的硬件和高级的操作系统支持。

对等方式
Peer to Peer 方式
简称为 P2P 方式
在网络核心部分起特殊作用的是路由器 (router)。
路由器是实现分组交换 (packet switching) 的关键构件，其任务是转发收到的分组。


1.3.2  互联网的核心部分
典型交换技术包括：
电路交换
电线对的数量与电话机数量的平方（N2）成正比。
分为三个阶段：
建立连接：建立一条专用的物理通路（占用通信资源）。
通话：主叫和被叫双方互相通电话（一直占用通信资源）。
释放连接：释放刚才使用的专用的物理通路（归还通信资源）。
电路交换特点：通话的两个用户始终占用端到端的通信资源

分组交换
采用存储转发技术
优点	所采用的手段
高效	在分组传输的过程中动态分配传输带宽，对通信链路是逐段占用。
灵活	为每一个分组独立地选择最合适的转发路由。
迅速	以分组作为传送单位，可以不先建立连接就能向其他主机发送分组。
可靠	保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性。
排队延迟：分组在各路由器存储转发时需要排队。
不保证带宽：动态分配。
增加开销：各分组必须携带控制信息；路由器要暂存分组，维护转发表等。

报文交换 等。
互联网的核心部分采用分组交换技术。


若要连续传送大量的数据，且其传送时间远大于连接建立时间，则电路交换的传输速率较快。
报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用率。
由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性。


1.5.2  几种不同类别的计算机网络
1. 按照网络的作用范围进行分类

类别	作用范围或距离
广域网 WAN 
(Wide Area Network)	通常为几十到几千公里。有时也称为远程网(long haul network)。是互联网的核心部分。
城域网 MAN 
(Metropolitan Area Network)	作用范围一般是一个城市，作用距离约为 5~50 公里。
局域网 LAN 
(Local Area Network) 	局限在较小的范围（如 1 公里左右）。通常采用高速通信线路。
个人区域网 PAN 
(Personal Area Network) 	范围很小，大约在 10 米左右。有时也称为无线个人区域网 WPAN (Wireless PAN)。


2. 按照网络的使用者进行分类
类别	作用范围或距离
公用网 
(public network) 	按规定交纳费用的人都可以使用的网络。也可称为公众网。
专用网 
(private network) 	为特殊业务工作的需要而建造的网络。

3. 用来把用户接入到互联网的网络
接入网 AN (Access Network)
又称为本地接入网或居民接入网。
用于将用户接入互联网。


1.6.1                           计算机网络的性能指标
1. 速率
指的是数据的传送速率，也称为数据率 (data rate) 或比特率 (bit rate)。
单位：bit/s，或 kbit/s、Mbit/s、 Gbit/s 等。
    例如 4  1010  bit/s 的数据率就记为 40 Gbit/s。
速率往往是指额定速率或标称速率，非实际运行速率。

千 = K = 210 = 1024，兆 = M = 220 = 1024 K，吉 = G = 230 = 1024 M
1 字节 (Byte) =  8 比特 (bit）


2. 带宽 (bandwidth)
频域
某个信号具有的频带宽度。
单位是赫（或千赫、兆赫、吉赫等）。
某信道允许通过的信号频带范围称为该信道的带宽（或通频带）

时域
网络中某通道传送数据的能力，表示在单位时间内网络中的某信道所能通过的“最高数据率”。
单位就是数据率的单位 bit/s。

两者本质相同。
一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高。

3. 吞吐量 (throughput)
位时间内通过某个网络（或信道、接口）的实际数据量。
受网络的带宽或网络的额定速率的限制。
额定速率是绝对上限值。
可能会远小于额定速率，甚至下降到零！
有时可用每秒传送的字节数或帧数来表示。

4. 时延 (delay 或 latency)
指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。
有时也称为延迟或迟延。
组成：
（1）发送时延
也称为传输时延。
是主机或路由器发送数据帧所需要的时间，也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。
数据帧长度（bit）/发送速率（bit/s）


（2）传播时延
是电磁波在信道中传播一定的距离需要花费的时间
信道长度（米）/信号在信道上的传播速率（米/秒）
电磁波传播速率：
自由空间的传播速率是光速 = 3.0 ⅹ 105 km/s
在铜线电缆中的传播速率约 = 2.3 ⅹ 105 km/s
在光纤中的传播速率约 = 2.0 ⅹ 105 km/s


（3）处理时延
主机或路由器在收到分组时，为处理分组（例如分析首部、提取数据、差错检验或查找路由）所花费的时间。

（4）排队时延
分组在路由器输入输出队列中排队等待处理和转发所经历的时延。
排队时延的长短往往取决于网络中当时的通信量。当网络的通信量很大时会发生队列溢出，使分组丢失，这相当于排队时延为无穷大。

发送时延发生在机器内部的发送器中，与传输信道的长度（或信号传送的距离）没有任何关系。
传播时延则发生在机器外部的传输信道媒体上，而与信号的发送速率无关。信号传送的距离越远，传播时延就越大。


5. 时延带宽积
时延带宽积 = 传播时延  带宽
链路的时延带宽积又称为以比特为单位的链路长度。
管道中的比特数表示从发送端发出但尚未到达接收端的比特数。
只有在代表链路的管道都充满比特时，链路才得到了充分利用。


6. 往返时间 RTT (Round-Trip Time)
表示从发送方发送完数据，到发送方收到来自接收方的确认总共经历的时间。


7. 利用率
信道利用率
某信道有百分之几的时间是被利用的（即有数据通过）。
完全空闲的信道的利用率是零。

网络利用率
全网络的信道利用率的加权平均值。

当某信道的利用率增大时，时延会迅速增加
D=D0/1-U
D0网络空闲时的时延
D 网络在当前的时延
U网络的利用率数值在0到1之间


1.7.3  具有五层协议的体系结构
OSI的七层协议体系结构
应用
表示 
会话
运输
网络
数据链路层
物理

TCP/IP的四层协议体系结构
应用层 (各种应用层协议，如DNS、HTTP、SMTP)
运输层(TCP或UDP)
网际层IP
网络接口层 没有具体内容

五层协议的体系结构
应用层
任务：通过应用进程间的交互来完成特定网络应用。
协议：定义的是应用进程间通信和交互的规则。
把应用层交互的数据单元称为报文(message)。
例如：DNS，HTTP，SMTP

运输层
任务：负责向两台主机中进程之间的通信提供通用的数据传输服务。
具有复用和分用的功能。
主要使用两种协议： 
传输控制协议 TCP 
用户数据报协议 UDP 。
TCP (Transmission Control Protocol)：
提供面向连接的、可靠的数据传输服务。
数据传输的单位是报文段 (segment)。
UDP (User Datagram Protocol)：
提供无连接的尽最大努力 (best-effort) 的数据传输服务（不保证数据传输的可靠性）。
数据传输的单位是用户数据报。

网络层 
为分组交换网上的不同主机提供通信服务。
两个具体任务：
路由选择：通过一定的算法，在互联网中的每一个路由器上，生成一个用来转发分组的转发表。
转发：每一个路由器在接收到一个分组时，要依据转发表中指明的路径把分组转发到下一个路由器。
互联网使用的网络层协议是无连接的网际协议 IP  (Internet Protocol) 和许多种路由选择协议，因此互联网的网络层也叫做网际层或 IP 层。
IP 协议分组也叫做 IP 数据报，或简称为数据报。

数据链路层
常简称为链路层。
任务：实现两个相邻节点之间的可靠通信。
在两个相邻节点间的链路上传送帧（frame）。
如发现有差错，就简单地丢弃出错帧。
如果需要改正出现的差错，就要采用可靠传输协议来纠正出现的差错。这种方法会使数据链路层协议复杂。

物理层
任务：实现比特（0 或 1）的传输。
确定连接电缆的插头应当有多少根引脚，以及各引脚应如何连接。
注意：传递信息所利用的一些物理媒体，如双绞线、同轴电缆、光缆、无线信道等，并不在物理层协议之内，而是在物理层协议的下面


1.7.4  实体、协议、服务和服务访问点

实体 (entity) ：表示任何可发送或接收信息的硬件或软件进程。 
协议：控制两个对等实体进行通信的规则的集合。 
在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。
要实现本层协议，还需要使用下层所提供的服务。
















